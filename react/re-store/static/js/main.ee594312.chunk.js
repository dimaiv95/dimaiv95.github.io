(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,a){e.exports=a.p+"static/media/error-indicator.00da8937.png"},32:function(e,t,a){e.exports=a(54)},41:function(e,t,a){},42:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),c=a.n(o),i=a(8),l=a(10),s=a(6),u=a(7),m=a(13),d=a(11),p=a(12),f=a(15),b=(a(41),a(14)),h=(a(42),function(e){var t=e.book,a=e.onAddedToCart,n=t.id,o=t.title,c=t.author,i=t.price,s=t.coverImg;return r.a.createElement("div",{className:"book-list-item"},r.a.createElement("div",{className:"book-list-item__cover"},r.a.createElement("img",{src:s,className:"book-list-item__img",alt:o})),r.a.createElement("div",{className:"book-list-item__detail"},r.a.createElement(l.b,{to:"article/".concat(n)},o),r.a.createElement("span",{className:"book-list-item__author"},c),r.a.createElement("span",{className:"book-list-item__price text-info"},"$",i),r.a.createElement("button",{className:"btn btn-info add-to-card",onClick:a},"Add to card")))}),E=r.a.createContext(),g=E.Provider,v=E.Consumer,_=function(){return function(e){return function(t){return r.a.createElement(v,null,function(a){return r.a.createElement(e,Object.assign({},t,{bookStoreService:a}))})}}},O=function(e){return{type:"FETCH_BOOKS_SUCCESS",payload:e}},k=function(e){return{type:"FETCH_BOOKS_FAILURE",payload:e}},y=function(e){return{type:"BOOK_ADDED_TO_CART",payload:e}},C=function(e){return function(){return function(t){t({type:"FETCH_BOOKS_REQUEST"}),e.getBooks().then(function(e){t(O(e))}).catch(function(e){t(k(e))})}}},S=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}},N=function(){return r.a.createElement("div",{className:"spinner-grow text-warning",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))},T=(a(48),a(29)),j=a.n(T),w=function(e){var t=e.message;return r.a.createElement("div",{className:"error-indicator"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col text-center"},r.a.createElement("div",{className:"alert alert-danger mb-0 pt-4 pb-4"},r.a.createElement("img",{src:j.a,className:"error-indicator__img",alt:"Error indicator"}),r.a.createElement("h2",{className:"error-indicator__title alert-heading"},"Error"),r.a.createElement("p",{className:"error-indicator__text"},t)))))};w.defaultProps={message:"Reload the page"};var I=w,A=(a(49),function(e){var t=e.books,a=e.onAddedToCart;return r.a.createElement("ul",{className:"book-list row"},t.map(function(e){return r.a.createElement("li",{key:e.id,className:"book-list__item col-sm-6"},r.a.createElement(h,{book:e,onAddedToCart:function(){return a(e.id)}}))}))}),D=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchBooks()}},{key:"render",value:function(){var e=this.props,t=e.books,a=e.loading,n=e.error,o=e.onAddedToCart;return a?r.a.createElement(N,null):n?r.a.createElement(I,{message:n}):r.a.createElement(A,{books:t,onAddedToCart:o})}}]),t}(n.Component),L=S(_(),Object(i.b)(function(e){var t=e.bookList;return{books:t.books,loading:t.loading,error:t.error}},function(e,t){var a=t.bookStoreService;return Object(b.b)({fetchBooks:C(a),onAddedToCart:y},e)}))(D),B=function(){return r.a.createElement(L,null)},F=(a(50),Object(i.b)(function(e){var t=e.shoppingCart;return{items:t.cartItems,total:t.orderTotal}},function(e){return{onIncrease:function(t){e(y(t))},onDecrease:function(t){e({type:"BOOK_DELETED_FROM_CART",payload:t})},onDelete:function(t){e({type:"All_BOOKS_DELETED_FROM_CART",payload:t})}}})(function(e){var t=e.items,a=e.total,n=e.onIncrease,o=e.onDecrease,c=e.onDelete;return r.a.createElement("div",{className:"shopping-cart-table"},r.a.createElement("h2",null,"Your Order"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"Item"),r.a.createElement("th",{scope:"col"},"Count"),r.a.createElement("th",{scope:"col"},"Price"),r.a.createElement("th",{scope:"col",className:"text-right"},"Actions"))),r.a.createElement("tbody",null,t.map(function(e,t){var a=e.id,i=e.title,l=e.count,s=e.price;return r.a.createElement("tr",{key:t+1},r.a.createElement("td",null,t+1),r.a.createElement("td",null,i),r.a.createElement("td",null,l),r.a.createElement("td",null,"$",s),r.a.createElement("td",{className:"text-right"},r.a.createElement("button",{type:"button",className:"shopping-cart-table__btn btn btn-outline-success",onClick:function(){return n(a)}},r.a.createElement("i",{className:"fa fa-plus-circle"})),r.a.createElement("button",{type:"button",className:"shopping-cart-table__btn btn btn-outline-warning",onClick:function(){return o(a)}},r.a.createElement("i",{className:"fa fa-minus-circle"})),r.a.createElement("button",{type:"button",className:"shopping-cart-table__btn btn btn-outline-danger",onClick:function(){return c(a)}},r.a.createElement("i",{className:"fa fa-trash"}))))}))),r.a.createElement("div",{className:"shopping-cart-table__total"},"Total: $",a))})),R=function(){return r.a.createElement(F,null)},x=(a(51),function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id;this.props.fetchBooks()}},{key:"render",value:function(){var e,t=this.props.match.params.id,a=this.props,n=a.books,o=a.loading,c=a.loadingImg,i=a.error,l=a.onAddedToCart,s=a.fetchImg;if(o)return r.a.createElement(N,null);if(i)return r.a.createElement(I,{message:i});n.length&&(e=n.find(function(e){return e.id==t}));var u=e,m=u.title,d=u.coverImg,p=u.price,f=u.description,b=c?{opacity:1}:{opacity:0};return r.a.createElement("div",{className:"book-item row"},r.a.createElement("figure",{className:"book-item__figure col-sm-4"},r.a.createElement("div",{className:"book-item__loading-img",style:b}),r.a.createElement("img",{src:d,alt:m,className:"book-item__img",onLoad:function(){return s()}})),r.a.createElement("div",{className:"book-item__about-product col-sm-8"},r.a.createElement("h2",{className:"book-item__title"},m),r.a.createElement("p",{className:"book-item__discription"},f),r.a.createElement("h3",{className:"book-item__price"},"$",p),r.a.createElement("button",{className:"btn btn-info add-to-card",onClick:function(){return l(t)}},"Add to card")))}}]),t}(n.Component)),J=S(_(),Object(i.b)(function(e){var t=e.bookList;return{books:t.books,article:t.article,loading:t.loading,loadingImg:t.loadingImg,error:t.error}},function(e,t){var a=t.bookStoreService;return{fetchBooks:function(){return e(C(a)())},fetchImg:function(){return e({type:"FETCH_IMG_SUCCESS"})},onAddedToCart:function(t){return e(y(t))}}}),f.e)(x),M=(a(52),Object(i.b)(function(e){var t=e.shoppingCart;return{items:t.cartItems,total:t.orderTotal}})(function(e){var t=e.items,a=e.total,n=t.length?t.map(function(e){return e.count}).reduce(function(e,t){return e+t}):0;return r.a.createElement("div",{className:"shop-header"},r.a.createElement(l.b,{to:"/",className:"shop-header__title"},"ReStore"),r.a.createElement(l.b,{to:"/cart",className:"shop-header__cart"},r.a.createElement("i",{className:"fa fa-shopping-cart"}),n," items ( $",a," )"))})),K=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(M,{numItem:5,total:210}),r.a.createElement(f.c,null,r.a.createElement(f.a,{path:"/",component:B,exact:!0}),r.a.createElement(f.a,{path:"/cart",component:R}),r.a.createElement(f.a,{path:"/article/:id",component:J})))}}]),t}(n.Component),H=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={isError:!1},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidCatch",value:function(){this.setState({isError:!0})}},{key:"render",value:function(){return this.state.isError?r.a.createElement(I,null):this.props.children}}]),t}(n.Component),U=function(){function e(){Object(s.a)(this,e),this.data=[{id:1,title:"JavaScript: The Definitive Guide",author:"David Flanagan",price:35,coverImg:"https://images-na.ssl-images-amazon.com/images/I/71oUHJ6uO7L.jpg",description:"Since 1996, JavaScript: The Definitive Guide has been the bible for JavaScript programmers\u2014a programmer's guide and comprehensive reference to the core language and to the client-side JavaScript APIs defined by web browsers. The 6th edition covers HTML5 and ECMAScript 5. Many chapters have been completely rewritten to bring them in line with today's best web development practices. New chapters in this edition document jQuery and server side JavaScript. It's recommended for experienced programmers who want to learn the programming language of the Web, and for current JavaScript programmers who want to master it."},{id:2,title:"JavaScript Patterns",author:"Stoyan Stefanov",price:13.49,coverImg:"https://images-na.ssl-images-amazon.com/images/I/511Gt98oEAL._SX379_BO1,204,203,200_.jpg",description:"What's the best approach for developing an application with JavaScript? This book helps you answer that question with numerous JavaScript coding patterns and best practices. If you're an experienced developer looking to solve problems related to objects, functions, inheritance, and other language-specific categories, the abstractions and code templates in this guide are ideal\u2014whether you're using JavaScript to write a client-side, server-side, or desktop application."},{id:3,title:"JavaScript Performance",author:"Nikolas Zakas",price:13.49,coverImg:"https://ozon-st.cdn.ngenix.net/multimedia/1005511392.jpg",description:"If you're like most developers, you rely heavily on JavaScript to build interactive and quick-responding web applications. The problem is that all of those lines of JavaScript code can slow down your apps. This book reveals techniques and strategies to help you eliminate performance bottlenecks during development. You'll learn how to improve execution time, downloading, interaction with the DOM, page life cycle, and more."}]}return Object(u.a)(e,[{key:"getBooks",value:function(){var e=this;return new Promise(function(t,a){setTimeout(function(){Math.random()>.9?a("Something bad happened"):t(e.data)},1e3)})}}]),e}(),P=a(30),G=a(31),$=function(e,t){if(void 0===e)return{books:[],loading:!0,loadingImg:!0,error:null};switch(t.type){case"FETCH_BOOKS_REQUEST":return{books:[],loading:!0,loadingImg:!0,error:null};case"FETCH_BOOKS_SUCCESS":return{books:t.payload,loading:!1,loadingImg:!0,error:null};case"FETCH_IMG_SUCCESS":return Object(G.a)({},e.bookList,{loadingImg:!1});case"FETCH_BOOKS_FAILURE":return{books:[],loading:!1,loadingImg:!1,error:t.payload};default:return e.bookList}},q=a(17),z=function(e,t,a){return 0===t.count?[].concat(Object(q.a)(e.slice(0,a)),Object(q.a)(e.slice(a+1))):-1===a?[].concat(Object(q.a)(e),[t]):[].concat(Object(q.a)(e.slice(0,a)),[t],Object(q.a)(e.slice(a+1)))},Q=function(e,t,a){var n=e.bookList.books,r=e.shoppingCart,o=r.cartItems,c=r.orderTotal,i=n.find(function(e){return e.id==t}),l=o.findIndex(function(e){return e.id==t}),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,n=t.id,r=void 0===n?e.id:n,o=t.title,c=void 0===o?e.title:o,i=t.count,l=void 0===i?0:i,s=t.price;return{id:r,title:c,count:l+a,price:parseFloat(((void 0===s?0:s)+a*e.price).toFixed(2))}}(i,o[l],a);return{orderTotal:parseFloat((c+a*i.price).toFixed(2)),cartItems:z(o,s,l)}},W=function(e,t){if(void 0===e)return{cartItems:[],orderTotal:0};switch(t.type){case"BOOK_ADDED_TO_CART":return console.log("Redux ",t.payload),Q(e,t.payload,1);case"BOOK_DELETED_FROM_CART":return Q(e,t.payload,-1);case"All_BOOKS_DELETED_FROM_CART":var a=e.shoppingCart.cartItems.find(function(e){return e.id===t.payload});return Q(e,t.payload,-a.count);default:return e.shoppingCart}},Y=function(e,t){return{bookList:$(e,t),shoppingCart:W(e,t)}},X=Object(b.c)(Y,Object(b.a)(P.a,function(){return function(e){return function(t){return e("string"===typeof t?{type:t}:t)}}},function(){return function(e){return function(t){return console.log(t.type),e(t)}}}));X.dispatch("HELLO_WORLD");var Z;X.dispatch((Z=3e3,function(e){setTimeout(function(){return e({type:"DELAYED_ACTION"})},Z)}));var V=X,ee=(a(53),new U);c.a.render(r.a.createElement(i.a,{store:V},r.a.createElement(H,null,r.a.createElement(g,{value:ee},r.a.createElement(l.a,null,r.a.createElement(K,null))))),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.ee594312.chunk.js.map